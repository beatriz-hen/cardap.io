<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>P√°gina Inicial</title>
    <link rel="stylesheet" href="home-style.css" />
</head>

<body>

    <header>
        <a href="home.html" class="logo">
            <img src="imagens/logo-transparente-marrom.png" alt="Logo" />
        </a>

        <div class="icons">
            <a href="perfil.html" style="display: inline-block; margin-left: 15px;">
                <svg width="24" height="24" fill="#932c30" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z" />
                </svg>
            </a>
        </div>
    </header>

    <!-- BARRA DE PESQUISA -->
    <div class="barra-pesquisa">
        <div class="icone-pesquisa">üîç</div>
        <input type="text" id="campo-busca" placeholder="Pesquisar">
    </div>

    <!-- LISTA DE RESTAURANTES -->
    <div class="cards-container">

        <a href="restaurante.html" class="card">

                <img src="imagens/spoleto___5kf_US12T4ZtglivHStU2.jpg" alt="" class="card-imagem">

            <div class="card-info">
                <div class="card-topo">
                    <div>
                        <h3>Spoleto</h3>
                        <strong>Italiana</strong>
                    </div>
                </div>

                <div class="caracteristica">
                    <p>$$$</p>
                    <p>Fam√≠lia</p>
                    <p>Amigos</p>
                </div>

                <div class="estrelas">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div>
            </div>
        </a>

        <a href="restaurante.html" class="card">

                <div class="card-imagem"></div>

            <div class="card-info">
                <div class="card-topo">
                    <div>
                        <h3>China in Box</h3>
                        <strong>Chinesa</strong>
                    </div>
                </div>

                <div class="caracteristica">
                    <p>$$</p>
                    <p>Fam√≠lia</p>
                </div>

                <div class="estrelas">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div>
            </div>
        </a>

    </div>

    <!-- BOT√ÉO FLUTUANTE "+" -->
    <a href="adicionar-rest.html" class="btn-add">+</a>

    <!-- FILTRAGEM DA BARRA DE PESQUISA -->
<script>
function normalizar(txt) {
    return txt
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .toLowerCase();
}

document.getElementById("campo-busca").addEventListener("input", function () {
    let termoBruto = this.value.trim();
    let termo = normalizar(termoBruto);
    let cards = document.querySelectorAll(".card");

    const precoSinonimos = {
        "barato": "$",
        "economico": "$",
        "simples": "$",
        "acessivel": "$",

        "medio": "$$",
        "intermediario": "$$",

        "caro": "$$$",
        "carissimo": "$$$",
        "luxo": "$$$",
        "premium": "$$$",
        "sofisticado": "$$$"
    };

    // Detectar sin√¥nimos digitados
    let precoBuscadoPorSinonimo = null;
    for (let palavra of termo.split(" ")) {
        if (precoSinonimos[palavra]) {
            precoBuscadoPorSinonimo = precoSinonimos[palavra];
            break;
        }
    }

    // Detectar $ digitado diretamente
    let precoBuscadoDireto = (termo.match(/\$/g) || []).join("");
    if (precoBuscadoDireto.length === 0)
        precoBuscadoDireto = null;

    cards.forEach(card => {
        let nome = normalizar(card.querySelector("h3")?.textContent || "");
        let culinaria = normalizar(card.querySelector("strong")?.textContent || "");
        let caracteristicas = [...card.querySelectorAll(".caracteristica p")]
            .map(p => normalizar(p.textContent))
            .join(" ");
        let estrelas = normalizar(card.querySelector(".estrelas")?.textContent || "");

        let precoCard = (caracteristicas.match(/\$/g) || []).join("");

        let textoCompleto = `${nome} ${culinaria} ${caracteristicas} ${estrelas}`;

        // Regra de busca
        let matchTexto = textoCompleto.includes(termo);

        let matchPreco = true;

        if (precoBuscadoPorSinonimo) {
            matchPreco = precoCard === precoBuscadoPorSinonimo;
        }

        if (precoBuscadoDireto) {
            matchPreco = precoCard === precoBuscadoDireto;
        }

        // Exibir card
        if (precoBuscadoPorSinonimo || precoBuscadoDireto) {
            card.style.display = matchPreco ? "flex" : "none";
        } else {
            card.style.display = matchTexto ? "flex" : "none";
        }
    });
});
</script>



</body>

</html>
